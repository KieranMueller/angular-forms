<app-control-flow-nav></app-control-flow-nav>
<div class="box">
  <div class="header-box">
    <h2>What's new?</h2>
    <h4>
      Introduced as a developer preview in Angular 17, and now stable in 18,
      control flow statements <br />
      enhance readability and eliminate the need for *ngif, *ngfor and other
      structural directives. These new <br />
      statements are built in, no need to import. On this page, we will cover
      <ul>
        <li>{{ "@" }}if, {{ "@" }}else if, {{ "@" }}else</li>
        <li>{{ "@" }}for</li>
        <li>{{ "@" }}switch, {{ "@" }}case</li>
      </ul>
    </h4>
    <div class="troubleshoot">
      <p>
        If you are implementing control flow statements in a project yourself,
        and notice an error: <br />(Unexpected character "EOF" error in
        template)
      </p>
      <ul>
        <li>ctrl shift p (vscode), restart angular language server</li>
      </ul>
      <p>
        Angular 17 users may need to add this line to their tsconfig.json file
      </p>
      <ul>
        <li>"_enabledBlockTypes": ["if","for","switch","defer"]</li>
      </ul>
    </div>
  </div>
  <div class="content-box">
    <h2>New {{ "@" }}if, {{ "@" }}else if, and {{ "@" }}else statements</h2>
    <div class="purple">
      @if (isHappy()) {
      <p>I am happy!</p>
      } @else {
      <p>I am upset...</p>
      }
      <button (click)="happy = !happy">toggle happy boolean</button>
    </div>
    <img src="../../assets/images/control-flow/@if.png" alt="code" />
    <img src="../../assets/images/control-flow/@if-html.png" alt="code" />
    <h4>
      Note that the conditional can also be the return value of a function
    </h4>
    <img
      class="smaller"
      src="../../assets/images/control-flow/@if1.png"
      alt="code"
    />
    <h4>There is also support for {{ "@" }}else if statements</h4>
    <hr />
    <h2>The old way</h2>
    <div class="purple">
      <p *ngIf="happy">I am happy!</p>
      <p *ngIf="!happy">I am upset...</p>
      <button (click)="happy = !happy">toggle happy boolean</button>
    </div>
    <img src="../../assets/images/control-flow/@if-old.png" alt="code" />
    <p>(yes, you could implement it this way as well)</p>
    <img
      class="small"
      src="../../assets/images/control-flow/@if-old1.png"
      alt="code"
    />
    <h4>
      But, as we can see, the new control flow syntax is much more readable,
      especially for javascript developers!
    </h4>
  </div>
  <div class="content-box content-box1">
    <h2>New {{ "@" }}for loop</h2>
    <div class="purple donkey-box">
      <h3 class="title">Donkeys</h3>
      @for (donkey of donkeys; track donkey; let i = $index) {
      <div class="row">
        <p>id: {{ i }}</p>
        <p>Name: {{ donkey.name }}</p>
        <p>Color: {{ donkey.color }}</p>
        <p>Age: {{ donkey.age }}</p>
      </div>
      } @empty {
      <p>No Donkeys!</p>
      }
      <button class="donkey-btn" (click)="randomizeDonkeys()">Randomize</button>
      <button class="donkey-btn" (click)="removeAllDonkeys()">
        {{ donkeys.length > 0 ? "Remove All" : "Add em back" }}
      </button>
    </div>
    <img src="../../assets/images/control-flow/@for2.png" alt="code" />
    <img src="../../assets/images/control-flow/@for1.png" alt="code" />
    <ul>
      <li>
        Notice that "track" is now required, improving performance, if you'd
        like to learn more in depth, visit
        <a
          href="https://blog.angular-university.io/angular-for/"
          target="_blank"
          >this</a
        >
        link
      </li>
      <li>We now have the {{ "@" }}empty block for an empty list</li>
      <li>This {{ "@" }}for loop can iterate over characters in a string</li>
      <li>The syntax for $index has been updated</li>
      <li>
        There is support for $first and $last, returning a boolean if the
        current element is first or last
      </li>
      <li>
        There is also support for $count, which holds the length of the array,
        in this case: 3
      </li>
    </ul>
    <hr />
    <h2>The old way</h2>
    <div class="purple donkey-box">
      <h3 class="title">Donkeys</h3>
      <div class="row" *ngFor="let donkey of donkeys; let i = index">
        <p>id: {{ i }}</p>
        <p>Name: {{ donkey.name }}</p>
        <p>Color: {{ donkey.color }}</p>
        <p>Age: {{ donkey.age }}</p>
      </div>
      <p *ngIf="donkeys.length === 0">No Donkeys!</p>
      <button class="donkey-btn" (click)="randomizeDonkeys()">Randomize</button>
      <button class="donkey-btn" (click)="removeAllDonkeys()">
        {{ donkeys.length > 0 ? "Remove All" : "Add em back" }}
      </button>
    </div>
    <img src="../../assets/images/control-flow/@for3.png" alt="code" />
  </div>
</div>
